#include<stdio.h>
#include<string.h>

int day_one_of_month;

/*This function takes the year and checks whether it is a leap year or not. if it is a 
  leap year then returns True(1), if not then return False(0)*/
int is_leap_year(int y)
{ 
  if(y%4==0)
  {
    if(y%100==0)
    {
      if(y%400==0)
        return 1;
      else
        return 0;
    }
    else
      return 1;
  }
  return 0;
}

/*This function takes the year and month and first calls the 'is_leap_year' function
  to check whether the year is a leap year or not. If not then returns the days from array. If year is a leap year and the month is feb then returns 29*/
int days_in_month(int y,int m)
{
  int month_days[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};
  if(is_leap_year(y)==0)
    return month_days[m];
  else
    {
      if(m==2)
        return 29;
      else
        return month_days[m];
    }
}

/*This function takes the year, month and first day of the year and calls the 'day in 
  month function' to find the number of days in a month and adds them to the day 
  counter till the entered month. It does not add the days from given month and at last 
  divides the counter by 7 to find the day and return it*/
int first_day_of_month(int y,int m)
{ 
  int day=0;
  for(int i=1589;i<=y;i++)
  { 
    if(i!=y)
      {
        for(int j=1;j<13;j++)
        {
          day+=days_in_month(i,j);
        }
      }
    else
      {
        for(int j=1;j<m;j++)
        {
          day+=days_in_month(i,j);
        }
      }
  }
  day%=7;
  return day;

}

/*This function takes the month number and returns the month name*/
char* month_name(int m)
{ 
  char *name[]={" ","January","February","March","April","May","June","July","August","September","October","November","December"};
  return name[m];
}

/*This function takes the year and month and prints the calendar for the given month*/
void print_calendar(year,month)
{ 
  int n=strlen(month_name(month))+5;
  for(int i=0;i<(20-n)/2;i++)
    printf("=");
  printf("%s %d",month_name(month),year);
  for(int i=0;i<(20-n)/2;i++)
    printf("=");
  printf("\nSu Mo Tu We Th Fr Sa\n");
  int t=1;
  for(int i=1;i<=days_in_month(year,month);i++)
  {
    if(i==1)
    {
      for(int j=0;j<day_one_of_month;j++)
      {
        printf("   ");
        t++;
      }
    }
    printf("%-3d",i);
    t++;
    if(t==8)
    {
      printf("\n");
      t=1;
    }
  }
}

/*This function takes the day number, and return the day name*/
char* day_name(int day)
{ 
  char* name[]={"Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"};
  return name[day];  
}

/*This function takes the entered year,month and date and calls the required functions to
  find the day on the given date and also prints it and also calls the print_calendar 
  function to print the calendar of the given month*/
void day_of_the_week(int y,int m,int d)
{ 
  day_one_of_month = first_day_of_month(y,m);
  int day=day_one_of_month;
  for(int i=1;i<d;i++)
  {
    day+=1;
  }
  day%=7;
  printf("\nThe day on %d/%d/%d is %s\n\n",d,m,y,day_name(day));
  print_calendar(y,m);
}

/*This function checks the validity of the given date,month,year*/
int check_validity(d,m,y)
{
  if((m>=1&&m<=12)&&(d>0&&d<32&&y>1589))
  {
    if(m==2&&is_leap_year(y))
    {
      if(d<=29)
        return 1;
      else
        return 0;
    }
    else if(m==2)
    {
      if(d<=28)
        return 1;
      else
        return 0;
    }
    else if(m==1||m==3||m==5||m==7||m==8||m==10||m==12)
    {
      if(d<=31)
        return 1;
      else
        return 0;
    }
    else
    {
      if(d<=30)
        return 1;
      else
        return 0;
    }
  }
  else
    return 0;
}


int main(void)
{
  int year,month,date;
  printf("Enter the date: ");
  scanf("%d",&date);
  printf("Enter the month: ");
  scanf("%d",&month);
  printf("Enter the year: ");
  scanf("%d",&year);
  if(check_validity(date,month,year))
  {
    day_of_the_week(year,month,date);
  }
  else
    printf("Entered date does not exist.");
}